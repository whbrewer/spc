!function(a){function b(){return!!document.createElement("canvas").getContext}function c(){if(!b())return!1;var a=document.createElement("canvas"),c=a.getContext("2d");return"function"==typeof c.fillText}function d(){var a=document.createElement("div");return"undefined"!=typeof a.style.MozTransition||"undefined"!=typeof a.style.OTransition||"undefined"!=typeof a.style.webkitTransition||"undefined"!=typeof a.style.transition}function e(a,b,c,d,e){this.axisName=a,this.position=b,this.padding=c,this.plot=d,this.opts=e,this.width=0,this.height=0}function f(a,b,c,d,f){e.prototype.constructor.call(this,a,b,c,d,f)}function g(a,b,c,d,f){e.prototype.constructor.call(this,a,b,c,d,f),this.elem=null}function h(a,b,c,d,e){g.prototype.constructor.call(this,a,b,c,d,e)}function i(a,b,c,d,e){h.prototype.constructor.call(this,a,b,c,d,e),this.requiresResize=!1}function j(b){b.hooks.processOptions.push(function(b,e){if(e.axisLabels.show){var j=!1,k={},l=2;b.hooks.draw.push(function(b,e){var m=!1;j?(j=!1,a.each(b.getAxes(),function(a,c){var d=c.options||b.getOptions()[a];d&&d.axisLabel&&c.show&&k[a].draw(c.box)})):(a.each(b.getAxes(),function(a,e){var j=e.options||b.getOptions()[a];if(a in k&&(e.labelHeight=e.labelHeight-k[a].height,e.labelWidth=e.labelWidth-k[a].width,j.labelHeight=e.labelHeight,j.labelWidth=e.labelWidth,k[a].cleanup(),delete k[a]),j&&j.axisLabel&&e.show){m=!0;var n=null;if(j.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)n=j.axisLabelUseHtml||!d()&&!c()&&!j.axisLabelUseCanvas?g:j.axisLabelUseCanvas||!d()?f:h;else{var o=navigator.userAgent,p=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=p.exec(o)&&(rv=parseFloat(RegExp.$1)),n=rv>=9&&!j.axisLabelUseCanvas&&!j.axisLabelUseHtml?h:j.axisLabelUseCanvas||j.axisLabelUseHtml?j.axisLabelUseCanvas?f:g:i}var q=void 0===j.axisLabelPadding?l:j.axisLabelPadding;k[a]=new n(a,e.position,q,b,j),k[a].calculateSize(),j.labelHeight=e.labelHeight+k[a].height,j.labelWidth=e.labelWidth+k[a].width}}),m&&(j=!0,b.setupGrid(),b.draw()))})}})}var k={axisLabels:{show:!0}};e.prototype.cleanup=function(){},f.prototype=new e,f.prototype.constructor=f,f.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels+this.padding,this.opts.axisLabelFontSizePixels+this.padding;"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},f.prototype.draw=function(a){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var b=this.plot.getCanvas().getContext("2d");b.save(),b.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,b.fillStyle=this.opts.axisLabelColour;var c,d,e=b.measureText(this.opts.axisLabel).width,f=this.opts.axisLabelFontSizePixels,g=0;"top"==this.position?(c=a.left+a.width/2-e/2,d=a.top+.72*f):"bottom"==this.position?(c=a.left+a.width/2-e/2,d=a.top+a.height-.72*f):"left"==this.position?(c=a.left+.72*f,d=a.height/2+a.top+e/2,g=-Math.PI/2):"right"==this.position&&(c=a.left+a.width-.72*f,d=a.height/2+a.top-e/2,g=Math.PI/2),b.translate(c,d),b.rotate(g),b.fillText(this.opts.axisLabel,0,0),b.restore()},g.prototype=new e,g.prototype.constructor=g,g.prototype.calculateSize=function(){var b=a('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(b),this.labelWidth=b.outerWidth(!0),this.labelHeight=b.outerHeight(!0),b.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},g.prototype.cleanup=function(){this.elem&&this.elem.remove()},g.prototype.draw=function(b){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=a('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",b.left+b.width/2-this.labelWidth/2+"px"),this.elem.css("top",b.top+"px")):"bottom"==this.position?(this.elem.css("left",b.left+b.width/2-this.labelWidth/2+"px"),this.elem.css("top",b.top+b.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",b.top+b.height/2-this.labelHeight/2+"px"),this.elem.css("left",b.left+"px")):"right"==this.position&&(this.elem.css("top",b.top+b.height/2-this.labelHeight/2+"px"),this.elem.css("left",b.left+b.width-this.labelWidth+"px"))},h.prototype=new g,h.prototype.constructor=h,h.prototype.calculateSize=function(){g.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},h.prototype.transforms=function(a,b,c){var d={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=b||0!=c){var e=" translate("+b+"px, "+c+"px)";d["-moz-transform"]+=e,d["-webkit-transform"]+=e,d["-o-transform"]+=e,d["-ms-transform"]+=e}if(0!=a){var f=" rotate("+a+"deg)";d["-moz-transform"]+=f,d["-webkit-transform"]+=f,d["-o-transform"]+=f,d["-ms-transform"]+=f}var g="top: 0; left: 0; ";for(var h in d)d[h]&&(g+=h+":"+d[h]+";");return g+=";"},h.prototype.calculateOffsets=function(a){var b={x:0,y:0,degrees:0};return"bottom"==this.position?(b.x=a.left+a.width/2-this.labelWidth/2,b.y=a.top+a.height-this.labelHeight):"top"==this.position?(b.x=a.left+a.width/2-this.labelWidth/2,b.y=a.top):"left"==this.position?(b.degrees=-90,b.x=a.left-this.labelWidth/2+this.labelHeight/2,b.y=a.height/2+a.top):"right"==this.position&&(b.degrees=90,b.x=a.left+a.width-this.labelWidth/2-this.labelHeight/2,b.y=a.height/2+a.top),b.x=Math.round(b.x),b.y=Math.round(b.y),b},h.prototype.draw=function(b){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var c=this.calculateOffsets(b);this.elem=a('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(c.degrees,c.x,c.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},i.prototype=new h,i.prototype.constructor=i,i.prototype.transforms=function(a,b,c){var d="";if(0!=a){for(var e=a/90;0>e;)e+=4;d+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+e+"); ",this.requiresResize="right"==this.position}return 0!=b&&(d+="left: "+b+"px; "),0!=c&&(d+="top: "+c+"px; "),d},i.prototype.calculateOffsets=function(a){var b=h.prototype.calculateOffsets.call(this,a);return"top"==this.position?b.y=a.top+1:"left"==this.position?(b.x=a.left,b.y=a.height/2+a.top-this.labelWidth/2):"right"==this.position&&(b.x=a.left+a.width-this.labelHeight,b.y=a.height/2+a.top-this.labelWidth/2),b},i.prototype.draw=function(a){h.prototype.draw.call(this,a),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},a.plot.plugins.push({init:j,options:k,name:"axisLabels",version:"2.0"})}(jQuery);